<!DOCTYPE html>
<html>
  <head>
    <title>Admin Panel - Movie Trailers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
  </head>
  <body class="bg-gray-50">
    <header class="bg-gray-800 text-white p-4">
      <div class="container mx-auto">
        <h1 class="text-2xl font-bold">
          <i class="fa fa-tachometer mr-2"></i>Admin Panel
        </h1>
        <p class="text-gray-300">Logged in as: {{username}} ({{role}})</p>
      </div>
    </header>

    <main class="container mx-auto p-4">
      <section class="mb-8">
        <h2 class="text-xl font-semibold mb-4 flex items-center">
          <i class="fa fa-list-alt mr-2"></i>Pending Submissions ({{pendingCount}})
        </h2>
        
        {{pendingSubmissions}}
      </section>

      {{adminManagement}}
    </main>

    <script>
      // 审核操作二次确认
      function confirmAction(id, action) {
        const actionText = action === 'approve' ? 'approve' : 'reject';
        const confirmation = confirm(`Are you sure you want to ${actionText} this submission?`);
        
        if (confirmation) {
          const form = document.getElementById(`form-${id}`);
          if (form) {
            form.querySelector('input[name="action"]').value = action;
            form.submit();
          }
        }
      }

      // 添加管理员二次确认
      function confirmAddAdmin() {
        const username = document.querySelector('#addAdminForm input[name="username"]').value.trim();
        if (!username) {
          showAdminMessage('Please enter a username', 'error');
          return;
        }
        
        const confirmation = confirm(`Are you sure you want to add "${username}" as a secondary admin?`);
        if (confirmation) {
          document.getElementById('addAdminForm').submit();
        }
      }
    </script>
    <script src="/static/admin.js"></script>
  </body>
</html>
